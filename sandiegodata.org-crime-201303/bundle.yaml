about:
    author: San Diego Regional Data Library
    description: Files for analyzing San Degio crime incidents, extracted from the
        free SpotCrime.com database. The resources include a GeoTIFF file in the San
        Diego analysis area for each of the values of the Type field in the original
        dataset, as well as the incident point data in a variety of geo formats and
        CSV.
    documents:
    -   description: SanGIS Terms and Conditions, for the street lamp shapefile.
        title: SanGIS Terms and Conditions
        url: http://www.sangis.org/Legal_Notice.htm
    groups:
    - Crime
    homepage: https://sandiegodata.atlassian.net/wiki/display/SDD/Crime+Analysis
    license: other-open
    maintainer: San Diego Regional Data Library
    tags:
    - government
    - gov-crime
    title: San Diego Crime Analysis
build:
    aa_geoid: CG0666000
    crime_merges:
        auto:
        - auto_breakin_theft
        - auto_theft
        other:
        - drugs
        - sex_crime
        - fraud
        - dui
        property:
        - theft
        - burglary
        - robbery
        - vandalism
        - arson
        violent:
        - assault
        - homocide
        - weapons
    dependencies:
        crime: sandag.org-crimeincidents-cleaned-429e
        extents: clarinova.com-extents-2012-7ba4
        lamps: sangis.org-street_lights-orig-7ba4-street_lights
extracts:
    colormaps:
        description: QGIS colormap.
        each:
        -   map_name: YlOrRd
            reversed: false
            size: 9
        -   map_name: Spectral
            reversed: true
            size: 9
        function: extract_colormaps
        name: colors-{map_name}-{size}.txt
    contours:
        description: Contours
        each:
        -   -   format: kml
            -   format: sqlite
            -   format: shapefile
        function: extract_contour_bounds
        name: contours_bounds.{format}
    csv:
        description: Incident points in CSV format. This is a direct dump of the {partition}
            partition.
        name: incidents.csv
        partition: clarinova.com-spotcrime_incidents-aa-orig-7ba4-incidents.CG0666000
        query: select * from incidents
    diffs:
        description: A grayscale GeoTIFF heatmap of the difference between the {type1}
            and {type2} datasets
        done_if: os.path.exists('{path}')
        each:
        -   -   type1: property
                type2: violent
            -   type1: violent
                type2: property
            -   type1: burglary
                type2: theft
        function: extract_diff_image
        name: sandiego-diff-{type1}-{type2}.tiff
        title: Crime Difference Map, {type1} - {type2}
    images:
        description: A grayscale GeoTIFF  heatmap of {type} crime in the San Diego
            area. It is intended for loading into a GIS program, and won't be useful
            in a general image viewer. The cell values are crimes per day per square
            kilometer, averaged over the analysis period, which is 2007, 2008 and
            2009.
        done_if: os.path.exists('{path}')
        each:
        -   -   type: assault
            -   type: homocide
            -   type: violent
            -   type: theft
            -   type: burglary
            -   type: robbery
            -   type: vandalism
            -   type: arson
            -   type: auto
            -   type: dui
            -   type: property
            -   type: drugs
            -   type: other
            -   type: auto_theft
            -   type: auto_breakin_theft

        function: extract_image
        name: sandiego-crime-{type}.tiff
        title: Crime Map, {type}
    incidentshape:
        description: Shape file of incident points in {format} format. The file includes
            attributes for time, date, type, description and address of the incidnets.
        each:
        -   -   format: kml
            -   format: geojson
            -   format: sqlite
            -   format: shapefile
        -   -   year: 2007
            -   year: 2008
            -   year: 2009
            -   year: 2010
            -   year: 2011
            -   year: 2012
            -   year: 2013
        function: extract_incident_shapefile
        name: incidents-{year}.{format}
identity:
    creator: eric@sandiegodata.org
    dataset: crime
    id: a2pN5m
    name: sandiegodata.org-crime-201303-429e
    revision: 1
    source: sandiegodata.org
    variation: '201303'
partitions:
- sandiegodata.org-crime-201303-429e-arrays
